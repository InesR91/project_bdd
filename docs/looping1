<?xml version="1.0" encoding="UTF-8"?>
<?PowerDesigner AppLocale="UTF16">
<LOOPINGMODEL>
   <Name>RaPizz</Name>
   <Code>RAPIZZ</Code>
   <Creator>Assistant Claude</Creator>
   <ModificationDate>2024-03-19</ModificationDate>
   <Entities>
      <Entity>
         <Name>CLIENT</Name>
         <Attributes>
            <Attribute>
               <Name>id_client</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>nom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>prenom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>adresse</Name>
               <DataType>text</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>telephone</Name>
               <DataType>varchar(15)</DataType>
            </Attribute>
            <Attribute>
               <Name>solde_compte</Name>
               <DataType>decimal(10,2)</DataType>
               <Default>0.00</Default>
               <Check>solde_compte >= 0</Check>
            </Attribute>
            <Attribute>
               <Name>nb_pizzas_achetees</Name>
               <DataType>integer</DataType>
               <Default>0</Default>
               <Check>nb_pizzas_achetees >= 0</Check>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>PIZZA</Name>
         <Attributes>
            <Attribute>
               <Name>id_pizza</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>nom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>prix_base</Name>
               <DataType>decimal(10,2)</DataType>
               <Mandatory>1</Mandatory>
               <Check>prix_base > 0</Check>
            </Attribute>
            <Attribute>
               <Name>nb_commandes</Name>
               <DataType>integer</DataType>
               <Default>0</Default>
               <Check>nb_commandes >= 0</Check>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>INGREDIENT</Name>
         <Attributes>
            <Attribute>
               <Name>id_ingredient</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>nom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>stock</Name>
               <DataType>integer</DataType>
               <Default>0</Default>
               <Check>stock >= 0</Check>
            </Attribute>
            <Attribute>
               <Name>nb_utilisations</Name>
               <DataType>integer</DataType>
               <Default>0</Default>
               <Check>nb_utilisations >= 0</Check>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>LIVREUR</Name>
         <Attributes>
            <Attribute>
               <Name>id_livreur</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>nom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>prenom</Name>
               <DataType>varchar(100)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>telephone</Name>
               <DataType>varchar(15)</DataType>
            </Attribute>
            <Attribute>
               <Name>nombre_retards</Name>
               <DataType>integer</DataType>
               <Default>0</Default>
               <Check>nombre_retards >= 0</Check>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>VEHICULE</Name>
         <Attributes>
            <Attribute>
               <Name>id_vehicule</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>type_vehicule</Name>
               <DataType>varchar(50)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>immatriculation</Name>
               <DataType>varchar(20)</DataType>
               <Mandatory>1</Mandatory>
               <Unique>1</Unique>
            </Attribute>
            <Attribute>
               <Name>disponible</Name>
               <DataType>boolean</DataType>
               <Default>true</Default>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>TAILLE</Name>
         <Attributes>
            <Attribute>
               <Name>id_taille</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>nom</Name>
               <DataType>varchar(20)</DataType>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>coefficient_prix</Name>
               <DataType>decimal(4,2)</DataType>
               <Mandatory>1</Mandatory>
               <Check>coefficient_prix > 0</Check>
            </Attribute>
         </Attributes>
      </Entity>
      <Entity>
         <Name>VENTE</Name>
         <Attributes>
            <Attribute>
               <Name>id_vente</Name>
               <DataType>integer</DataType>
               <Primary>1</Primary>
               <Mandatory>1</Mandatory>
            </Attribute>
            <Attribute>
               <Name>date_commande</Name>
               <DataType>timestamp</DataType>
               <Mandatory>1</Mandatory>
               <Default>CURRENT_TIMESTAMP</Default>
            </Attribute>
            <Attribute>
               <Name>date_livraison</Name>
               <DataType>timestamp</DataType>
            </Attribute>
            <Attribute>
               <Name>duree_livraison</Name>
               <DataType>integer</DataType>
               <Check>duree_livraison >= 0</Check>
            </Attribute>
            <Attribute>
               <Name>montant_initial</Name>
               <DataType>decimal(10,2)</DataType>
               <Mandatory>1</Mandatory>
               <Check>montant_initial >= 0</Check>
            </Attribute>
            <Attribute>
               <Name>montant_final</Name>
               <DataType>decimal(10,2)</DataType>
               <Mandatory>1</Mandatory>
               <Check>montant_final >= 0</Check>
            </Attribute>
            <Attribute>
               <Name>gratuite_retard</Name>
               <DataType>boolean</DataType>
               <Default>false</Default>
            </Attribute>
            <Attribute>
               <Name>gratuite_fidelite</Name>
               <DataType>boolean</DataType>
               <Default>false</Default>
            </Attribute>
            <Attribute>
               <Name>statut</Name>
               <DataType>varchar(20)</DataType>
               <Mandatory>1</Mandatory>
               <Check>statut IN ('en_attente', 'refusee', 'en_cours', 'livree')</Check>
            </Attribute>
         </Attributes>
      </Entity>
   </Entities>
   <Relations>
      <Relation>
         <Name>COMPOSE</Name>
         <Entity1>PIZZA</Entity1>
         <Entity2>INGREDIENT</Entity2>
         <Cardinality1>0,n</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
         <Attributes>
            <Attribute>
               <Name>quantite</Name>
               <DataType>integer</DataType>
               <Mandatory>1</Mandatory>
               <Check>quantite > 0</Check>
            </Attribute>
         </Attributes>
      </Relation>
      <Relation>
         <Name>COMMANDE</Name>
         <Entity1>CLIENT</Entity1>
         <Entity2>VENTE</Entity2>
         <Cardinality1>1,1</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
      </Relation>
      <Relation>
         <Name>LIVRE</Name>
         <Entity1>LIVREUR</Entity1>
         <Entity2>VENTE</Entity2>
         <Cardinality1>1,1</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
      </Relation>
      <Relation>
         <Name>UTILISE</Name>
         <Entity1>VEHICULE</Entity1>
         <Entity2>VENTE</Entity2>
         <Cardinality1>1,1</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
      </Relation>
      <Relation>
         <Name>CONCERNE</Name>
         <Entity1>PIZZA</Entity1>
         <Entity2>VENTE</Entity2>
         <Cardinality1>1,1</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
      </Relation>
      <Relation>
         <Name>DIMENSIONNE</Name>
         <Entity1>TAILLE</Entity1>
         <Entity2>VENTE</Entity2>
         <Cardinality1>1,1</Cardinality1>
         <Cardinality2>0,n</Cardinality2>
      </Relation>
   </Relations>
</LOOPINGMODEL> 